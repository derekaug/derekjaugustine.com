var dja={init:function(a){var b=this;switch(b.tplMessage=$("#tplMessage").html(),a){case"email":b.$buttonSubmit=$("#buttonSubmit"),b.$formEmail=$("#formEmail"),b.$divMessages=$("#divMessages"),b.$inputName=$("#inputName"),b.$inputEmail=$("#inputEmail"),b.$textareaBody=$("#textareaBody"),b.$inputOutput=b.$formEmail.find('input[name="output"]'),b.$inputRedirect=b.$formEmail.find('input[name="redirect"]'),b.$inputOutput.data("original",b.$inputOutput.val()),b.$inputRedirect.data("original",b.$inputRedirect.val()),b.$formEmail.on("submit",$.proxy(b.emailSubmit,b)),GLOBALS.data&&GLOBALS.data.messages&&b.showMessages(GLOBALS.data.messages,b.$divMessages)}},showMessages:function(a,b){var c=this;b.empty(),$.each(a,function(a,d){b.append(Mustache.render(c.tplMessage,d))})},isLoading:function(a){return a.attr("disabled")===!0},setLoading:function(a,b){b.attr("disabled",a)},clearForm:function(){var a=this;a.$inputEmail.val(""),a.$inputName.val(""),a.$textareaBody.val("")},emailSubmit:function(a){a.preventDefault();var b=this;b.isLoading(b.$buttonSubmit)||(b.setLoading(!0,b.$buttonSubmit),b.$inputOutput.val("json"),b.$inputRedirect.val(null),$.ajax({url:b.$formEmail.attr("action"),type:b.$formEmail.attr("method"),data:b.$formEmail.serialize(),dataType:"json",success:function(a){b.showMessages(a.messages,b.$divMessages),a.success&&b.clearForm()},error:function(){},complete:function(){b.setLoading(!1,b.$buttonSubmit),b.$inputOutput.val(b.$inputOutput.data("original")),b.$inputRedirect.val(b.$inputRedirect.data("original"))}}))}};